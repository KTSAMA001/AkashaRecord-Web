# AkashaRecord-Web

é˜¿å¡è¥¿è®°å½•çš„å¯äº¤äº’ç½‘ç«™ï¼ŒåŸºäº [VitePress](https://vitepress.dev/) æ„å»ºã€‚

è‡ªåŠ¨ä» [AgentSkill-Akasha-KT](https://github.com/KTSAMA001/AgentSkill-Akasha-KT) ä»“åº“åŒæ­¥å†…å®¹ï¼Œæ¸²æŸ“ä¸ºç¾è§‚çš„æ–‡æ¡£ç«™ç‚¹ã€‚

## ç‰¹æ€§

- ğŸ“ è‡ªåŠ¨åˆ†ç±»å¯¼èˆªï¼ˆç»éªŒ / çŸ¥è¯† / çµæ„Ÿï¼‰
- ğŸ” å…¨æ–‡æœç´¢ï¼ˆå†…ç½®æœ¬åœ°æœç´¢ï¼Œæ”¯æŒä¸­æ–‡ï¼‰
- ğŸ”— äº¤å‰å¼•ç”¨è·³è½¬
- ğŸ“Š é¦–é¡µä»ªè¡¨ç›˜ï¼ˆç»Ÿè®¡ + æœ€è¿‘æ›´æ–°ï¼‰
- ğŸ·ï¸ æ ‡ç­¾äº‘
- ğŸŒ™ æš—è‰²æ¨¡å¼
- ğŸ“± å“åº”å¼è®¾è®¡
- ğŸ”„ GitHub Webhook è‡ªåŠ¨æ›´æ–°

## æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# åŒæ­¥å†…å®¹ + å¯åŠ¨å¼€å‘æœåŠ¡
npm run dev

# ä»…åŒæ­¥å†…å®¹
npm run sync

# æ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

## æœåŠ¡å™¨éƒ¨ç½²ï¼ˆä»é›¶å¼€å§‹æŒ‡å—ï¼‰

æœ¬æŒ‡å—å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ **é˜¿é‡Œäº‘/è…¾è®¯äº‘è½»é‡æœåŠ¡å™¨**ï¼Œå¹¶å·²å®‰è£… **å®å¡”é¢æ¿**ã€‚

### 1. ç¯å¢ƒå‡†å¤‡

é¦–å…ˆé€šè¿‡ç»ˆç«¯ï¼ˆSSHï¼‰ç™»å½•ä½ çš„æœåŠ¡å™¨ï¼ˆroot ç”¨æˆ·ï¼‰ã€‚

**æ£€æŸ¥å¹¶å®‰è£… Git**ï¼ˆå¿…é¡»æ­¥éª¤ï¼Œå¦åˆ™æ— æ³•ä¸‹è½½ä»£ç ï¼‰ï¼š
```bash
# CentOS / Alibaba Cloud Linux
yum install git -y

# Ubuntu / Debian
apt-get update && apt-get install git -y
```

### 2. è·å–ä»£ç ä¸ä¸€é”®éƒ¨ç½²

å¤åˆ¶ä»¥ä¸‹å‘½ä»¤åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ Node.js å®‰è£…ã€ä¾èµ–ä¸‹è½½ã€ç«™ç‚¹æ„å»ºå’Œ Nginx é…ç½®ã€‚

```bash
# 1. è¿›å…¥ Web ç›®å½•ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼Œå»ºä¸€ä¸ªï¼‰
mkdir -p /www/wwwroot
cd /www/wwwroot

# 2. åˆ é™¤å¯èƒ½å­˜åœ¨çš„æ—§ç›®å½•ï¼ˆå¦‚æœæ˜¯é‡è£…ï¼‰
rm -rf AkashaRecord-Web

# 3. å…‹éš†ä»“åº“
git clone https://github.com/KTSAMA001/AkashaRecord-Web.git AkashaRecord-Web

# 4. è¿›å…¥ç›®å½•å¹¶è¿è¡Œéƒ¨ç½²è„šæœ¬
cd AkashaRecord-Web
bash deploy/deploy.sh
```

**éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š**
- âœ… æ£€æŸ¥å¹¶å®‰è£… Node.js (v18+) å’Œ PM2
- âœ… æ‹‰å–æœ€æ–°çš„é˜¿å¡è¥¿è®°å½•æ•°æ®
- âœ… æ„å»º VitePress é™æ€ç«™ç‚¹
- âœ… ç”Ÿæˆ Nginx é…ç½®æ–‡ä»¶å¹¶æµ‹è¯•
- âœ… å¯åŠ¨ Webhook æœåŠ¡ï¼ˆç”¨äºè‡ªåŠ¨æ›´æ–°ï¼‰

### 3. é…ç½®åŸŸåè®¿é—®

1. **DNS è§£æ**ï¼š
   - å‰å¾€åŸŸåæœåŠ¡å•†æ§åˆ¶å°ï¼ˆå¦‚é˜¿é‡Œäº‘ DNSï¼‰ã€‚
   - æ·»åŠ  `A` è®°å½•ï¼šä¸»æœºè®°å½• `akasha`ï¼Œè®°å½•å€¼å¡« `æœåŠ¡å™¨å…¬ç½‘ IP`ã€‚

2. **SSL è¯ä¹¦ï¼ˆHTTPSï¼‰**ï¼š
   - ç™»å½• **å®å¡”é¢æ¿**ã€‚
   - è¿›å…¥ `ç½‘ç«™` -> æ‰¾åˆ° `akasha.ktsama.top`ï¼ˆè„šæœ¬å¯èƒ½å·²å¸®ä½ åˆ›å»ºç«™ç‚¹ï¼Œæˆ–æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚
   - ç‚¹å‡» `é…ç½®` -> `SSL` -> `Let's Encrypt` -> ç”³è¯·å¹¶å¼€å¯ HTTPSã€‚
   - å¼€å¯ `å¼ºåˆ¶ HTTPS` ä»¥è·å¾—æ›´å®‰å…¨çš„è®¿é—®ä½“éªŒã€‚

### 4. é…ç½®è‡ªåŠ¨åŒ–æ›´æ–° (Webhook)

è®©ç½‘ç«™åœ¨ä½ æ›´æ–°çŸ¥è¯†åº“æ—¶è‡ªåŠ¨é‡å»ºã€‚

1. æ‰“å¼€ [AgentSkill-Akasha-KT ä»“åº“è®¾ç½®](https://github.com/KTSAMA001/AgentSkill-Akasha-KT/settings/hooks)ï¼ˆæ³¨æ„æ˜¯æ•°æ®ä»“åº“ï¼Œä¸æ˜¯è¿™ä¸ª Web ä»“åº“ï¼‰ã€‚
2. ç‚¹å‡» **Add webhook**ï¼š
   - **Payload URL**: `https://akasha.ktsama.top/webhook` (ç¡®ä¿æ˜¯ HTTPS)
   - **Content type**: `application/json`
   - **Secret**: (ç•™ç©ºï¼Œæˆ–æ ¹æ® `server/webhook.mjs` ä¸­çš„é…ç½®å¡«å†™)
   - **Which events**: é€‰æ‹© `Just the push event`ã€‚
3. ç‚¹å‡» **Add webhook** ä¿å­˜ã€‚

ç°åœ¨ï¼Œæ¯å½“ä½ å‘é˜¿å¡è¥¿è®°å½• push æ–°çš„ç¬”è®°ï¼Œç½‘ç«™å°±ä¼šåœ¨ 1-2 åˆ†é’Ÿå†…è‡ªåŠ¨æ›´æ–°ã€‚

### å¸¸ç”¨è¿ç»´å‘½ä»¤

### å¸¸ç”¨è¿ç»´å‘½ä»¤

```bash
# æŸ¥çœ‹ Webhook æœåŠ¡æ—¥å¿—
pm2 logs akasha-webhook

# é‡å¯ Webhook æœåŠ¡
pm2 restart akasha-webhook

# æ‰‹åŠ¨è§¦å‘é‡å»º
curl -X POST http://127.0.0.1:3721/webhook/rebuild

# å¥åº·æ£€æŸ¥
curl http://127.0.0.1:3721/webhook/health
```

## é¡¹ç›®ç»“æ„

```
AkashaRecord-Web/
â”œâ”€â”€ .vitepress/
â”‚   â”œâ”€â”€ config.mts          # VitePress é…ç½®
â”‚   â”œâ”€â”€ theme/              # è‡ªå®šä¹‰ä¸»é¢˜
â”‚   â”‚   â”œâ”€â”€ index.ts        # ä¸»é¢˜å…¥å£
â”‚   â”‚   â”œâ”€â”€ components/     # Vue ç»„ä»¶
â”‚   â”‚   â””â”€â”€ styles/         # è‡ªå®šä¹‰æ ·å¼
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ sidebar.ts      # ä¾§è¾¹æ è‡ªåŠ¨ç”Ÿæˆ
â”œâ”€â”€ content/                # åŒæ­¥çš„é˜¿å¡è¥¿è®°å½•å†…å®¹ï¼ˆgitignoreï¼‰
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ sync-content.mjs    # å†…å®¹åŒæ­¥è„šæœ¬
â”œâ”€â”€ server/
â”‚   â””â”€â”€ webhook.mjs         # Webhook æœåŠ¡
â”œâ”€â”€ deploy/
â”‚   â”œâ”€â”€ deploy.sh           # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ nginx.conf          # Nginx é…ç½®æ¨¡æ¿
â”œâ”€â”€ experiences/            # ç»éªŒåˆ†ç±»é¦–é¡µï¼ˆ+ åŒæ­¥å†…å®¹ï¼‰
â”œâ”€â”€ knowledge/              # çŸ¥è¯†åˆ†ç±»é¦–é¡µï¼ˆ+ åŒæ­¥å†…å®¹ï¼‰
â”œâ”€â”€ ideas/                  # çµæ„Ÿåˆ†ç±»é¦–é¡µï¼ˆ+ åŒæ­¥å†…å®¹ï¼‰
â””â”€â”€ index.md                # ç½‘ç«™é¦–é¡µ
```

## License

MIT
